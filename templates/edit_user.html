{% extends 'base.html' %}

{% block content %}
<div class="bg-white rounded-lg shadow">
    <div class="border-b px-6 py-4">
        <h2 class="font-semibold text-lg">Edit User: {{ user.username }}</h2>
    </div>
    
    <div class="p-6">
        <!-- Form submits back to the same edit_user route, but with POST method -->
        <form method="POST" action="{{ url_for('edit_user', id=user.id) }}">
            <div class="mb-6">
                <label for="username" class="block text-sm font-medium text-gray-700 mb-1">Username</label>
                <!-- Pre-fill value with existing username -->
                <input type="text" id="username" name="username" required 
                       class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" 
                       value="{{ user.username }}">
            </div>
            
            <div class="mb-6">
                <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                <!-- Pre-fill value with existing email -->
                <input type="email" id="email" name="email" required 
                       class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" 
                       value="{{ user.email }}">
            </div>
            
            <!-- Note: Password field is omitted for simplicity. Add if needed with proper handling. -->
            <!-- 
            <div class="mb-6">
                <label for="password" class="block text-sm font-medium text-gray-700 mb-1">New Password (Optional)</label>
                <input type="password" id="password" name="password" 
                       class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" 
                       placeholder="Leave blank to keep current password">
            </div>
            -->
            
            <div class="mb-6">
                <label for="role" class="block text-sm font-medium text-gray-700 mb-1">Role</label>
                <select id="role" name="role" required class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                    <option value="">-- Select Role --</option>
                    <!-- Mark the user's current role as selected -->
                    <option value="admin" {% if user.role == 'admin' %}selected{% endif %}>Admin</option>
                    <option value="doctor" {% if user.role == 'doctor' %}selected{% endif %}>Doctor</option>
                    <option value="nurse" {% if user.role == 'nurse' %}selected{% endif %}>Nurse</option>
                    <option value="staff" {% if user.role == 'staff' %}selected{% endif %}>Staff</option>
                </select>
            </div>
            
            <div class="flex justify-end gap-3">
                <a href="{{ url_for('users') }}" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md">Cancel</a>
                <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md">Update User</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
